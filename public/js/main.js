$(function(){});var app=angular.module("app",["ngRoute","ngCookies"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"templates/left-frame.html",controller:"frontPageController"}).when("/game/:gameName",{templateUrl:"templates/left-frame.html",controller:"frontPageController"})}]),app.controller("frontPageController",["$scope","$sce","$http","helpers","$routeParams","$cookies",function(e,t,r,n,a,o){e.streams=stream_data.streams,e.encodeURI=n.encodeURI,e.live={selection:function(){return o.get("stream")?o.get("stream"):n.pickRandomStream(e.streams)}(),menu:"top-streams",stream:{src:function(e){return e.stream.url+e.selection},url:"http://player.twitch.tv/?channel="},chat:{src:function(e){return e.chat.url.replace("{CHANNEL}",e.selection)},url:"http://twitch.tv/chat/embed?channel={CHANNEL}&amp;popout_chat=true"}},e.getGameStreams=function(t){r({method:"GET",url:"https://api.twitch.tv/kraken/streams?game="+n.encodeURI(t)}).then(function(t){e.streams=t.data.streams},function(e){console.log(e)})},e.setLiveStream=function(t){o.put("stream",t),e.live.selection=t},e.trustSrc=function(e){return t.trustAsResourceUrl(e)},e.$watch("$routeParams",function(){a.gameName&&(name=a.gameName.replace("&","%26"),e.getGameStreams(name))})}]),app.directive("chatEmbed",function(){return{restrict:"AE",replace:!0,templateUrl:"../templates/chat-embed.html"}}),app.directive("videoEmbed",function(){return{restrict:"AE",replace:!0,templateUrl:"../templates/video-embed.html"}}),app.directive("channelRow",function(){return{restrict:"AE",replace:!0,templateUrl:"../templates/channel-row.html"}}),app.service("helpers",function(){return{encodeURI:function(e){return encodeURIComponent(e)},replaceNewlines:function(e){return console.log(e),e},goBack:function(e){0===window.history.length||window.history.back()},pickRandomStream:function(e){var t=Math.floor(Math.random()*e.length);return e[t].channel.name}}}),app.service("twitch",function(){return{}});